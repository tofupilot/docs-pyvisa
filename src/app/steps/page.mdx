export const metadata = {
  title: 'Steps',
  description: 'This guide shows how to create and add various test steps in Tofupilot and view the automatically generated reports, helping to identify frequent failures and time-consuming steps.',
}

# Steps

Hardware manufacturing tests often involve multiple steps such as connections, measurements, calibration, and more. Tofupilot offers a simple way to record the details of these steps and analyze their performance across all executions. {{ className: 'lead' }}

This guide shows how to create and add various test steps in Tofupilot and view the automatically generated reports. This helps you quickly identify frequent failures and time-consuming steps, allowing you to focus on improvements.

## Example

To log test step details, this script defines test functions, runs them sequentially, captures their results, and adds them to the `steps` table in `create_run`.

<Note>
  This example is designed to be framework-agnostic and offers a simple
  sequencing logic suitable. For manufacturing deployments, we recommend using
  proven test sequencers like [PyTest](https://docs.pytest.org/en/8.2.x/),
  [OpenHTF](https://www.openhtf.com/), or your own.
</Note>

## Run Page

A dedicated **Steps** section is automatically created on the Runâ€™s page.

<Image src={'/steps-run.png'} alt={'Steps of Run'} />

## Procedure Page

The Procedure page provides a summary of the steps' run count, status, and average duration in the **Steps** section:

<Image src={'/steps-procedure.png'} alt={'Steps Runs of Procedures'} />

## Run Duration

If no total test duration is provided, it will be computed as the sum of the durations of all the steps. However, if a total test duration is specified, it will override the computed sum.

## API Reference

Each `step` in the `steps` array provided to `create_run` should include the following parameters:

### Required

<Properties>
  <Property name="name" type="string">
    Name of the step.
  </Property>
  <Property name="started_at" type="datetime">
    Timestamp when the step started.
  </Property>
  <Property name="duration" type="timedelta">
    Duration of the step in seconds.
  </Property>
  <Property name="step_passed" type="boolean">
    Indicates whether the step passed.
  </Property>
</Properties>

### Optional

<Properties>
  <Property name="measurement_value" type="number or None">
    Value measured during the step, if any.
  </Property>
  <Property name="measurement_unit" type="string or None">
    Unit of the measurement value, if any.
  </Property>
  <Property name="limit_low" type="number or None">
    Lower limit for the measurement, if any.
  </Property>
  <Property name="limit_high" type="number or None">
    Upper limit for the measurement, if any.
  </Property>
</Properties>
