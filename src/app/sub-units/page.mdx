export const metadata = {
  title: 'Sub-Units',
  description:
    'TofuPilot offers a fine-tuned Python library to make your life easier and give you the best experience when consuming the API.',
}

# Create a run with sub-units

TofuPilot supports sub-units within units under test (UUT), and it will automatically link them accordingly when creating runs for seamless traceability throughout assembly. {{ className: 'lead' }}

## Example with single sub-unit

Here's how to create a Run with sub-units:

```python {{ title: 'create_run_sub_unit.py'}}
from tofupilot import TofuPilotClient

client = TofuPilotClient(api_key="Your API key goes here")

def test_function():
    # your test execution goes here
    return True

run_passed = test_function()

client.create_run(
    procedure_id="FVT1",
    unit_under_test={
      "serial_number": "00002",
      "part_number": "SI001"
    },
    run_passed=run_passed,
    sub_units=[{"serial_number": "00102"}]
)
```

<Note>
  Sub-units must be created first; new ones are added without replacing existing
  ones, and duplicates are ignored.
</Note>

## Check the Units page

You can now navigate to the Units page to see the hierarchy applied. Use the expand button to view the children of the tested units.

<Image src="/sub-units.png" alt="Your profile page" />

## Example with multiple sub-units

Here's how to create a Run with multiple sub-units:

```python {{ title: 'create_run_sub_units.py'}}
from tofupilot import TofuPilotClient
import time

client = TofuPilotClient(api_key="Your API key goes here")

def test_function():
    # your test execution goes here
    return True

run_passed = test_function()

client.create_run(
    procedure_id="FVT1",
    unit_under_test={
      "serial_number": "00003",
      "part_number": "SI002"
    },
    run_passed=run_passed,
    sub_units=[{"serial_number": "00002"}, {"serial_number": "00102"}]
)
```
